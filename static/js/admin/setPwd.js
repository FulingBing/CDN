var yzm=document.getElementById("yzm");var username=document.getElementById("username");var email=document.getElementById("email");var pwd=document.getElementById("pwd");var pwd2=document.getElementById("pwd2");var text=document.getElementById("pwdt");var em=document.getElementById("em");var subem=document.getElementById("fs");var subpw=document.getElementById("tj");var outtime=0;function sb(){if(subpw.value!="重置密码"){return;}text.innerHTML="";if(username.value=="" || email.value=="" || yzm.value=="" || pwd.value=="" || pwd2.value==""){text.innerHTML="<b>内容不能为空</b>";return;}if(pwd.value!=pwd2.value){text.innerHTML="<b>两次密码不一样</b>";return;}subpw.value="正在提交";ajax("../../SetPwd.do?user="+username.value+"&yzm="+yzm.value+"&pwd="+md5(pwd.value),"resetpwd");}function resetpwd(i){if(i=="false"){text.innerHTML="<b>验证码错误</b>";subpw.value="重置密码";}else if(i=="true"){alert("密码重置成功");setTimeout(function (){window.location.href="login.jsp";},3000);}else{text.innerHTML="<b>失败：服务器内部错误</b>";subpw.value="重置密码";}}function getemail(){if(subem.value!="发送邮箱验证码"){return;}text.innerHTML="";em.style.display="none";if(username.value=="" || email.value==""){text.innerHTML="<b>用户名和邮箱不能为空</b>";return;}if(!isPassCaptcha("reCaptcha")){text.innerHTML="请点击验证码进行人机验证";return;}outtime=-100;subem.value="正在发送";ajax("../../GetEmailYzm.do?user="+username.value+"&email="+email.value+"&token="+getCaptchaKey("reCaptcha"),"regetemail");}function regetemail(i){if(i.substr(0,4)=="true"){outtime=60;em.style.display="";getEmail(i.substr(4));}else if(i=="time"){text.innerHTML="<b>你的操作过于频繁，请稍后重试</b>";outtime=60;}else if(i=="yzm"){text.innerHTML="<b>请点击验证码进行人机验证</b>";}else if(i=="false"){text.innerHTML="<b>邮箱或用户名无效</b>";}else{text.innerHTML="<b>服务器内部错误</b>";subem.value="发送邮箱验证码";}reloadCaptcha("reCaptcha");}function settime(){if(outtime>-10){if(outtime<=1){outtime=0;if(subem.value!="发送邮箱验证码"){subem.value="发送邮箱验证码";}}else{outtime=outtime-1;subem.value="重新发送（"+outtime+"）";}}setTimeout('settime()',1000);}settime();