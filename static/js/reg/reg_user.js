var reg_an,reg_ap;function reyz(i){var namet=document.getElementById('namet');var pwdt=document.getElementById('pwdt');var pwd2t=document.getElementById('pwd2t');var sub=document.getElementById('sub');if(i=="have"){namet.style.color="red";namet.innerHTML="用户名已存在";sub.innerHTML="注册";}else if(i=="true"){window.location.href="reg.jsp?msg=msg";}else if(i=="name"){namet.style.color="red";namet.innerHTML="格式错误";sub.innerHTML="注册";}else if(i=="pwd"){pwdt.style.color="red";pwdt.innerHTML="格式错误";sub.innerHTML="注册";}else{pwd2t.style.color="red";pwd2t.innerHTML="服务器繁忙，请稍后重试";sub.innerHTML="注册";}}function yz(){var name=document.getElementById('name');var namet=document.getElementById('namet');var pwd=document.getElementById('pwd');var pwdt=document.getElementById('pwdt');var pwd2=document.getElementById('pwd2');var pwd2t=document.getElementById('pwd2t');var sub=document.getElementById('sub');if(sub.innerHTML!="注册"){return;}csh();if(name.value==""){namet.style.color="red";namet.innerHTML="用户名不能为空";return;}var n=name.value;if(n.length<3){namet.style.color="red";namet.innerHTML="用户名至少3位";return;}var res=/^\w+$/;if(!res.test(n)){namet.style.color="red";namet.innerHTML="用户名仅限英文、数字和下划线";return;}res=/^[0-9]\d*$/;if(res.test(n)){namet.style.color="red";namet.innerHTML="用户名不能全为数字";return;}var p=pwd.value;if(p.length<6){pwdt.style.color="red";pwdt.innerHTML="密码至少6位";return;}if(pwd.value!=pwd2.value){pwd2t.style.color="red";pwd2t.innerHTML="两次密码不一致";return;}yzok(n,p);}function csh(){var namet=document.getElementById('namet');var pwdt=document.getElementById('pwdt');var pwd2t=document.getElementById('pwd2t');namet.style.color="blue";pwdt.style.color="blue";pwd2t.style.color="blue";namet.innerHTML="3-16位，仅限英文、数字和下划线";pwdt.innerHTML="6-32位，推荐英文、数字和符号的组合";pwd2t.innerHTML="两次密码必须一样";}csh();function yzok(n,p){reg_an=n;reg_ap=p;document.getElementById('sub').innerHTML="正在提交";ajax("Register.do?user="+reg_an+"&pwd="+md5(reg_ap),"reyz");}