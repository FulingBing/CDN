function upload(i,k){document.getElementById(i).src=k;}var startload=false,token="null";function regetLogName(i,t){userkey=i;token=t;startload=true;loadskin();}function loadskin(){document.getElementById("imgerror").innerHTML="";
document.getElementById("skinmain").src="//"+webserver+"/skin/resource/textures/skin/"+userkey+".png?type="+Math.random();document.getElementById("capemain").src="//"+webserver+"/skin/resource/textures/capes/"+userkey+".png?type="+Math.random();
}function yzskin(idimg){var ImgObj=new Image();ImgObj.src=document.getElementById(idimg).src;if(ImgObj.fileSize>0 || (ImgObj.width>0 && ImgObj.height>0)){return true;}else{return false;}}
var skinViewer=new skinpreview3d.SkinViewer({domElement:document.getElementById('SkinCanvas'),slim:true,width:650,height:400});var control=new skinpreview3d.SkinControl(skinViewer);control.enableAnimationControl=false;
skinViewer.animationSpeed=4;control.enableAnimationControl=false;skinViewer.animationSpeed=4;var img=document.getElementById("skinmain");var img2=document.getElementById("capemain");
img.onload=function(){if(yzskin("skinmain")){skinViewer.skinUrl=img.src;document.getElementById('deldiv').style.display="";document.getElementById('u').innerHTML="上传新皮肤";noskin(1);}};
img2.onload=function(){if(yzskin("capemain")){skinViewer.capeUrl=img2.src;document.getElementById('delpfdiv').style.display="";document.getElementById('u2').innerHTML="上传新披风";noskin(1);}};
var updiv=document.getElementById("updata");var updiv2=document.getElementById("updata2");function hideupdiv(){updiv.style.display="none";updiv2.style.display="none";loadskin();upload('upload',"uploadin.jsp");upload('upload',"uploadin.jsp");}
function showupdiv(){updiv.style.display="";upload('upload','upload.jsp');}function showupdiv2(){updiv2.style.display="";upload('upload2','upcapes.jsp');}function delskin(){var okdel=document.getElementById('okdel');if(okdel.innerHTML!='确认删除'){return;}
okdel.innerHTML='正在删除';ajax("../delSkin.do?type=type&token="+token,"reokdel");}function reokdel(i){document.getElementById('okdel').innerHTML="确认删除";if(i=="true"){window.location.reload();}}function delpfskin(){var okdel=document.getElementById('okdelpf');
if(okdel.innerHTML!='确认删除'){return;}okdel.innerHTML='正在删除';ajax("../delCape.do?type=type&token="+token,"reokdelpf");}function reokdelpf(i){document.getElementById('okdelpf').innerHTML="确认删除";if(i=="true"){window.location.reload();}}
var limg1=false,limg2=false;function loadusexy(i){if(!startload){return;}if(i==0){limg1=true;}else{limg2=true;}if(limg1 && limg2){noskin(0);}}img.onerror=function(){loadusexy(0);};img2.onerror=function(){loadusexy(1);};
function viewPass(){skinViewer.animationPaused=!skinViewer.animationPaused;}function viewRun(){if(skinViewer.animationSpeed==4){skinViewer.animationSpeed=16;}else{skinViewer.animationSpeed=4;}}