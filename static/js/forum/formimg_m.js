var usexy=document.location.protocol;usexy=usexy.replace(":","");function closecopy(){document.getElementById("copy").style.display="none";}function opencopy(i){var h=location.href;if(h.indexOf("#")>-1){h=h.substring(0,h.indexOf("#"));}var c=document.getElementById("copytxt");c.innerHTML=h+i;document.getElementById("copy").style.display="";c.select();}var showimgmv=document.getElementById("showimgmv");var showimgbk=document.getElementById("showimgbk");var showimgwh=document.getElementById("showimgwh");var showimg=document.getElementById("showimg");var oldurl=showimg.src;var naturalWidth=0;var naturalHeight=0;function closeshowimg(){showimg.src=oldurl;showimg.style.width="0";showimgwh.style.display="none";showimgbk.style.display="none";naturalWidth=17;naturalHeight=17;fwshowimg();}function openshowimg(img){if(img.naturalWidth<215){return;}naturalWidth=img.naturalWidth;naturalHeight=img.naturalHeight;fwshowimg();showimgbk.style.display="";showimgwh.style.display="";showimg.src=img.src;xtshowimg();}function lookshowimg(){var url=showimg.src.replace(usexy+"://"+host,"");window.open("file.jsp?url="+url);}function fwshowimg(){if(naturalWidth>200){showimgwh.style.width=naturalWidth+"px";}else{showimgwh.style.width="200px";}showimg.style.width=naturalWidth+"px";var w=document.documentElement.clientWidth-naturalWidth;if(w<=0){showimgwh.style.left=w+"px";}else{w=w/2;showimgwh.style.left=w+"px";}var h=document.documentElement.clientHeight-naturalHeight-60;if(h<=0){showimgwh.style.top="60px";}else{h=h/2+30;showimgwh.style.top=h+"px";}showimgmv.style.height=(naturalHeight+20)+"px";}var oldmpX=0,oldmpY=0;var ismove=false;function moveshowimg(e){e=e || window.event;var newX=e.screenX,newY=e.screenY;var xdX=newX-oldmpX;var xdY=newY-oldmpY;oldmpX=newX;oldmpY=newY;if(ismove){showimgwh.style.top=(showimgwh.offsetTop+xdY)+"px";showimgwh.style.left=(showimgwh.offsetLeft+xdX)+"px";}}showimgwh.onmousemove=function(ev){moveshowimg(ev);};showimgbk.onmousemove=function(ev){moveshowimg(ev);};
showimgwh.onmousedown=function(){ismove=true;};showimgwh.onmouseup=function(){ismove=false;};function bdshowimg(){var w=showimg.clientWidth;showimg.style.width=(w+20)+"px";showimgwh.style.width=(w+20)+"px";showimgmv.style.height=(showimg.clientHeight+20)+"px";showimgwh.style.top=(showimgwh.offsetTop-5)+"px";showimgwh.style.left=(showimgwh.offsetLeft-10)+"px";}function bxshowimg(){var w=showimg.clientWidth;if(w<=210){return;}showimg.style.width=(w-20)+"px";showimgwh.style.width=(w-20)+"px";showimgmv.style.height=(showimg.clientHeight+20)+"px";showimgwh.style.top=(showimgwh.offsetTop+5)+"px";showimgwh.style.left=(showimgwh.offsetLeft+10)+"px";}function xtshowimg(){var w=naturalWidth-(document.documentElement.clientWidth-40);var h=naturalHeight-(document.documentElement.clientHeight-100);if(w<h){w=h;}if(w>0){w=w/20;}else{return;}for(var i=0;i<=w;i++){bxshowimg();}showimgwh.style.top="60px";w=document.documentElement.clientWidth-showimg.clientWidth-20;if(w<0){showimgwh.style.left=w+"px";}else{showimgwh.style.left=(w/2)+"px";}}var scrollFunc=function(e){var direct=0;ee=e || window.event;if(e.wheelDelta){direct=e.wheelDelta;if(direct<0){direct=1;}else{direct=-1;}}else if(e.detail){direct=e.detail;if(direct<0){direct=-1;}else{direct=1;}}else{return;}if(direct==-1){bdshowimg();}else{bxshowimg();}return false;};function addmousegd(){if(showimgwh.addEventListener){showimgwh.addEventListener('DOMMouseScroll',scrollFunc,false);}showimgwh.onmousewheel=scrollFunc;}addmousegd();function openlong(){var c=document.getElementById("copytxt");c.innerHTML=long.value;document.getElementById("copy").style.display="";c.select();}function reset(i){if(i=="false"){window.location.href="teapot.jsp";return;}if(i=="error"){messageshow("服务器繁忙");}if(i=="lv"){messageshow("操作失败：你需要拥有比对方更高的权限才能这么做");}if(i=="stop"){messageshow("操作失败：你的账号已被封禁");}if(i=="true"){location.reload();return;}if(i=="del"){window.location.href="forum-"+slx+".html";return;}document.getElementById("uptext").style.display="none";}
function tzdzup(i,lz){if(lz){settzdzlz(i,true);}var dzs=document.getElementById("dzs-"+i);dzs.setAttribute("style","fill:#FF5080");var dzt=document.getElementById("dzt-"+i);var st=dzt.innerHTML;if(st==""){st="1";}else{var dzb=parseInt(st)+1;st=dzb;}dzt.innerHTML=st;document.getElementById("dzj-"+i).value="1";}function tzdzdown(i,lz){if(lz){settzdzlz(i,false);}var dzs=document.getElementById("dzs-"+i);dzs.setAttribute("style","fill:#888888");var dzt=document.getElementById("dzt-"+i);var st=dzt.innerHTML;if(st==""){return;}else{var dzb=parseInt(st)-1;if(dzb==0){st="";}else{st=dzb;}}dzt.innerHTML=st;document.getElementById("dzj-"+i).value="0";}function tzdzajax(i,lx,t,lz){tzdzcheck(lx+"-"+i,lz);ajax("SetTz.do?changeDz="+i+"&type="+lx+"&token="+t,"retzdzajax");}function retzdzajax(i){if(i!="true"){alert("点赞失败:服务器繁忙");setTimeout(function(){location.reload();},1000);}}function tzdzcheck(i,lz){var dz=document.getElementById("dzj-"+i).value;if(dz=="1"){tzdzdown(i,lz);}else{tzdzup(i,lz);}}function clicktzdz(i,lx,t,lz){var dz=document.getElementById("dzj-"+lx+"-"+i).value;if(dz=="1"){EjectConfirm("你确定要取消点赞吗？",function(){tzdzajax(i,lx,t,lz);});}else{tzdzajax(i,lx,t,lz);}}function settzdzlz(i,a){var l=document.getElementById("dzl-"+i);if(a){l.innerHTML="楼主觉得很赞";}else{l.innerHTML="";}}