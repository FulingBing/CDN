function reOverTime(){stopall();ajax("../../RunCmd.do?cmd=pot re "+uuid+"&token="+token,"reData");}function changeinfo(c,t,r,u){stopall();ajax("../../ServerApi.do?changeinfo="+c+"&type="+t+"&res="+r+"&user="+u+"&token="+token,"reData");}
function changeclose(c,r){stopall();ajax("../../ServerApi.do?changeclose="+c+"&res="+r+"&token="+token,"reData");}function getClose(n,r,i){var s="æœªå…³é—­",c="headusr";if(i=="1"){s="å·²å…³é—­";c="cff00";}var re="<span class='"+c+"'>"+s+"</span>";if(owner==1)
{re=re+"<input type='button' class='button_b ende' value='åˆ‡æ¢' onclick=\"changeclose('"+n+"','"+r+"')\"/>";}return re;}function reData(i){location.reload();}function getBtnList(o,n,t,r){var re="";for(var i=0;i<o.length;i++){if(owner==1)
{re=re+"<input type=\"button\" class=\"button_b\" value=\""+o[i].name+"\" onclick=\"changeinfo('"+n+"','"+t+"','"+r+"','"+o[i].name+"')\" onmouseover=\"this.value='åˆ é™¤'\""+" onmouseout=\"this.value='"+o[i].name+"'\"/>";}else{re=re+o[i].name+",";}re=re+"&nbsp;";}
if(owner==1){return re+"<input type=\"button\" class=\"button_r\" value=\"æ·»åŠ \" onclick=\"addUserInfo('"+n+"','"+t+"','"+r+"')\"/>";}else{return re;}}function addUserInfo(n,t,r){var name=prompt("è¯·è¾“å…¥ID","");if(name){if(name.length>0){changeinfo(n,t,r,name);}}}
function getTimetn(t){var time=new Date(parseInt(t));var y=time.getFullYear();var M=time.getMonth()+1;var d=time.getDate();var h=time.getHours();var m=time.getMinutes();var s=time.getSeconds();return re=y+'-'+addZero(M)+'-'+addZero(d)+' '+addZero(h)+':'+addZero(m)+':'+addZero(s);}
function addZero(m){return m<10?'0'+m:m;}function loadUser(){ajax("../../ServerApi.do?player="+name+"&token="+token,"reloaduser");}function reloaduser(i){var obj=eval("("+i+")");var h="<table class=\"tablecss\">"+"<tr><td>UUID</td><td>"+obj.uuid+"</td></tr>"+"<tr><td>è¡€é‡</td><td>"
+parseInt(obj.health)+"/"+parseInt(obj.maxhealth)+"</td></tr>"+"<tr><td>é¥±é£Ÿåº¦</td><td>"+parseInt(obj.fool)+"/20</td></tr>"+"<tr><td>é™„é­”ç­‰çº§</td><td>"+obj.level+"</td></tr>"+"<tr><td>åæ ‡</td><td>"+obj.x+","+obj.y+","+obj.z+"&nbsp;("+obj.world+")</td></tr>"+"</table>";
document.getElementById("info").innerHTML=h;h="<table class=\"tablecss\">"+"<thead><tr><td width=\"110px\">åç§°</td>"+"<td width=\"90px\">æ‰€åœ¨ä¸–ç•Œ</td><td width=\"190px\">æœ‰æ•ˆæœŸ</td><td>æˆå‘˜</td><td width=\"280px\">å°ç¦</td><td width='95px'>è¾¹ç•Œ<input type='button' value='?' "
+"class='button_r' style='border-radius:50%;transform:scale(0.7);position:absolute;margin-top:-2px' onclick=\"alert('å…³é—­/å¼€å¯ ç­‰åŒæ¸¸æˆä¸­è¾“å…¥æŒ‡ä»¤/res ban/unban *')\"/></td></tr></thead>";for(var i=0;i<obj.residence.length;i++){h=h+"<tr><td>"+obj.residence[i].name+"</td><td>"+obj.residence[i].world
+"</td><td>"+getfrozen(obj.residence[i])+"</td><td>"+getBtnList(obj.residence[i].trust,window.btoa(obj.residence[i].name),"trust","1")+"</td><td>"+getBtnList(obj.residence[i].ban,window.btoa(obj.residence[i].name),"ban","1")+"</td><td>"+getClose(window.btoa(obj.residence[i].name),"1",obj.residence[i].close)
+"</td></tr>";}h=h+"</table>";document.getElementById("res").innerHTML=h;h="<table class=\"tablecss\">"+"<thead><tr><td width=\"110px\">ID</td><td width=\"90px\">æ‰€åœ¨ä¸–ç•Œ</td><td width=\"190px\">æœ‰æ•ˆæœŸ</td><td>æˆå‘˜</td><td width=\"280px\">å°ç¦</td><td width='95px'>è¾¹ç•Œ<input type='button' value='?' class="
+"'button_r' style='border-radius:50%;transform:scale(0.7);position:absolute;margin-top:-2px' onclick=\"alert('å…³é—­/å¼€å¯ ç­‰åŒæ¸¸æˆä¸­è¾“å…¥æŒ‡ä»¤/plot ban/unban *')\"/></td></tr></thead>";for(var i=0;i<obj.plot.length;i++){h=h+"<tr><td>"+obj.plot[i].idx+","+obj.plot[i].idz+"</td><td>"+obj.plot[i].world+"</td><td>"
+getTimetn(obj.plot[i].overtime)+"</td><td>"+getBtnList(obj.plot[i].trust,window.btoa(obj.plot[i].world+","+obj.plot[i].idx+","+obj.plot[i].idz),"trust","0")+"</td><td>"+getBtnList(obj.plot[i].ban,window.btoa(obj.plot[i].world+","+obj.plot[i].idx+","+obj.plot[i].idz),"ban","0")+"</td><td>"
+getClose(window.btoa(obj.plot[i].world+","+obj.plot[i].idx+","+obj.plot[i].idz),"0",obj.plot[i].close)+"</td></tr>";}h=h+"</table>";document.getElementById("plot").innerHTML=h;var rebtn=document.getElementById("retime");if(rebtn){rebtn.style.display="";}}loadUser();function getfrozen(o)
{if(o.frozen=="-1"){var btn="";if(owner==1){btn="<input type='button' class='button_b ende' value='å†»ç»“' onclick=\"setFrozen('"+o.name+"')\"/>";}return getTimetn(o.overtime)+btn;}else{return "<span class='c0088'>"+getTimetn(o.frozen)+" ğŸ”’</span>";}}function setFrozen(n){
document.getElementById("res").value=window.btoa(n);document.getElementById("resname").innerHTML=n;document.getElementById("frozen").style.display="";}function upFrozen(){var n=document.getElementById("res").value;var d=document.getElementById("day").value;
if(d==""){alert("è¯·è¾“å…¥å†»ç»“æ—¶é•¿");}else{stopall();ajax("../../ServerApi.do?frozen="+n+"&day="+d+"&token="+token,"reData");}}function changemenu(i){var m=document.getElementsByName("box");if(m){for(var j=0;j<m.length;j++){if(j==i){m[j].style.display="";}else{
m[j].style.display="none";}}}endchat();}function setchatsize(){var c=document.getElementById("chat");if(c){var h=document.getElementById("menu").offsetTop-200;if(h<=10){c.style.display="none";}else{c.style.display="";}var w=c.parentNode.clientWidth-26;
c.style.width=w+"px";c.style.height=h+"px";}}window.addEventListener("resize", setchatsize);var getchattime=2,inchattime=0;var cangetchat=false;function getchat(t){ajax("/bbs/gameinfo.do?token="+token+"&getchat="+t,"regetchat");}function regetchat(i){
if(i.indexOf("{")==0){window.location.reload();return;}if(i=="[]"){if(getchattime<10){getchattime+=2;}}else{if(i.indexOf("[")==0){getchattime=2;var c=document.getElementById("chat");var obj=JSON.parse(i);for(var j=0;j<obj.length;j++){c.innerHTML=c.innerHTML+"\n"+obj[j].name
+" >> "+obj[j].msg;}c.scrollTop = c.scrollHeight;}}}function putchat(){var cm=document.getElementById("chatmsg");var m=cm.value;if(m==""){return;}cm.value="";var bm=encodeURIComponent(m);ajax("/bbs/gameinfo.do?token="+token+"&putchat="+bm,"reputchat");}
function reputchat(i){if(i.indexOf("{")==0){window.location.reload();return;}getchattime=2;}function KeyDown(){if(event.keyCode==13){putchat();}}function getpilltime(){document.getElementById("pill").innerHTML="æ­£åœ¨è¯»å–æ•°æ®...";document.getElementById("pillbtn").value="--";
ajax("/bbs/gameinfo.do?token="+token+"&pilltime=1","regetpilltime");}getpilltime();var pilltime=-1;function regetpilltime(i){if(i.indexOf("{")==0){window.location.reload();return;}if(i.indexOf("[")==0){var obj=JSON.parse(i);pilltime=parseInt(obj[0].time);
document.getElementById("pill").innerHTML="æ•°æ®è¯»å–å®Œæ¯•";}else{getpilltime();}}function setpilltime(i){if(pilltime>=0){var re="ç‚¼ä¸¹";if(pilltime>0){pilltime-=i;}if(pilltime>0){re=re+"ã€€(å†·å´ä¸­ï¼Œ"+pilltime+")";}document.getElementById("pillbtn").value=re;}}
function getpill(){if(document.getElementById("pillbtn").value=="ç‚¼ä¸¹"){stopall();ajax("/bbs/gameinfo.do?token="+token+"&getpill=1","regetpill");}}function regetpill(i){if(i.indexOf("{")==0){window.location.reload();return;}showall();if(i.indexOf("[")==0){pilltime=1800;
setpilltime(0);var obj=JSON.parse(i);document.getElementById("pill").innerHTML=obj[0].pill;setbknum(1);}else{document.getElementById("pill").innerHTML="ç½‘ç»œå¼‚å¸¸ï¼Œè¯·åˆ·æ–°é¡µé¢åé‡è¯•";}}var rescd=0;function setrescd(i){if(rescd>0){rescd-=i;}var r="";if(rescd>0){r="ã€€(å†·å´ä¸­ï¼Œ"+rescd+")";}
var all=document.getElementsByName("res");all[0].value="æŒ–çŸ¿"+r;all[1].value="ç æ ‘"+r;all[2].value="åˆ·æ€ª"+r;}function getchatrun(){if(cangetchat){inchattime++;if(inchattime>=getchattime){inchattime=0;getchat((new Date()).getTime()-getchattime*1000);}}setrescd(1);
setpilltime(1);setTimeout("getchatrun()",1000);}function startchat(){getchattime=2;cangetchat=true;document.getElementById("chat").innerHTML="æ­¤é¡µé¢ä¸æ¸¸æˆå…¬å±äº’é€šã€‚\nèŠå¤©å¯èƒ½ä¼šå­˜åœ¨å‡ ç§’çš„å»¶è¿Ÿï¼Œå±æ­£å¸¸ç°è±¡ã€‚\n\nå·²è¿æ¥åˆ°æœåŠ¡å™¨ã€‚\n";}function endchat(){cangetchat=false;
document.getElementById("chat").innerHTML="";}getchatrun();function setbknum(i){bknum+=i;document.getElementById("bknum").innerHTML=bknum;}setbknum(0);function setresmsg(m){document.getElementById("doout").innerHTML=m;}function getres(i){if(document.getElementsByName("res")[i-1].value.indexOf("(")!=-1){
return;}stopall();ajax("/bbs/gameinfo.do?token="+token+"&getres="+i,"regetres");}function regetres(i){if(i.indexOf("{")==0){window.location.reload();return;}showall();var re="";if(i=="[]"){re="å“å‘€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœ‰å¼„åˆ°ï¼Œä¼‘æ¯ä¸€ä¸‹å†æ¥å§";}else{if(i.indexOf("[")==0){var obj=JSON.parse(i);
if(obj.length!=1){re="å“å‘€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœ‰å¼„åˆ°ï¼Œä¼‘æ¯ä¸€ä¸‹å†æ¥å§";}else{re=obj[0].name;if(obj[0].error=="false"){re="è·å¾—äº†"+re+"ã€€<span onclick='setres()' class='text cupo headusr'>æ”¾å…¥ç¦»çº¿èƒŒåŒ…</span>ã€€<span onclick=\"setresmsg('æ“ä½œæˆåŠŸ')\" class='text cupo cff80'>ä¸¢å¼ƒ</span>";}}}}
rescd=11;setrescd(0);setresmsg(re);}function setres(){stopall();ajax("/bbs/gameinfo.do?token="+token+"&resok=1","reresok");}function reresok(i){if(i.indexOf("{")==0){window.location.reload();return;}showall();var re;if(i=="[]"){re="å“å‘€ï¼Œä¸œè¥¿å¼„ä¸¢äº†ï¼Œé‡æ–°è·å–å§";}else{setbknum(1);
re="æ“ä½œæˆåŠŸ";}setresmsg(re);}function getToMoney(i){ajax("/bbs/gameinfo.do?token="+token+"&exchange="+i,"regetToMoney");}function regetToMoney(i){if(i.indexOf("{")==0){window.location.reload();return;}showall();var t1="Error",t2="Error";if(i.indexOf("[")==0){var obj=JSON.parse(i);
t1=obj[0].today;t2=obj[0].other;}document.getElementById("todaymoney").innerHTML="<b>"+t1+"</b>(ä»Šæ—¥å›æ”¶æ•°é‡,æ¯æ—¥é‡ç½®)";document.getElementById("othermoney").innerHTML="<b>"+t2+"</b>(é¢å¤–å›æ”¶æ•°é‡,æ°¸ä¸è¿‡æœŸ)";}getToMoney(0);function reOther(i){if(i.indexOf("{")==0){window.location.reload();return;}
if(i.indexOf("[")==0){showall();var obj=JSON.parse(i);alert(obj[0].msg);}}function doOther(t){stopall();ajax("/bbs/gameinfo.do?other="+t+"&token="+token,"reOther");}