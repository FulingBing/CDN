var all_der="/img/failure.png";var all_dtit=document.title;var all_dicon=getDocIcon();document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){document.title="哎呀，页面崩溃了";setDocIcon(all_der);}else{document.title="咦？又好了~";setDocIcon(all_dicon);setTimeout("reDocTitle()",1000);}});function reDocTitle(){if(document.visibilityState=="hidden"){return;}document.title=all_dtit;}
function getDocIcon(){var link=document.getElementsByTagName('link');for (var i=0;i<link.length;i++){var rel=link[i].rel;rel=rel.toLowerCase();if(rel.indexOf('icon')>-1){return link[i].href;}}return "";}function setDocIcon(url){var link=document.getElementsByTagName('link');for(var i=0;i<link.length;i++){var rel=link[i].rel;rel=rel.toLowerCase();if(rel.indexOf('icon')>-1){link[i].href=url;break;}}}